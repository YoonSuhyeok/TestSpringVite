!function(){function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},n(t)}function t(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=e){var o,a,r,i,p=[],u=!0,s=!1;try{if(r=(e=e.call(n)).next,0===t){if(Object(e)!==e)return;u=!1}else for(;!(u=(o=r.call(e)).done)&&(p.push(o.value),p.length!==t);u=!0);}catch(n){s=!0,a=n}finally{try{if(!u&&null!=e.return&&(i=e.return(),Object(i)!==i))return}finally{if(s)throw a}}return p}}(n,t)||o(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(n){return function(n){if(Array.isArray(n))return a(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||o(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(n,t){if(n){if("string"==typeof n)return a(n,t);var e={}.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?a(n,t):void 0}}function a(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,o=Array(t);e<t;e++)o[e]=n[e];return o}function r(n,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,p(o.key),o)}}function i(n,t,e){return(t=p(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function p(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var a=o.call(t,e||"default");if("object"!=n(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}System.register([],(function(n,o){"use strict";return{execute:function(){var n=document.createElement("style");n.textContent=":root{font-family:system-ui,Avenir,Helvetica,Arial,sans-serif;line-height:1.5;font-weight:400;color:#213547;background-color:#fff;font-synthesis:none;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}a{font-weight:500;color:#646cff;text-decoration:inherit}a:hover{color:#747bff}body{margin:0;display:flex;place-items:center;min-width:320px;min-height:100vh}h1{font-size:3.2em;line-height:1.1}#app{max-width:1280px;margin:0 auto;padding:2rem;text-align:center}.logo{height:6em;padding:1.5em;will-change:filter;transition:filter .3s}.logo:hover{filter:drop-shadow(0 0 2em #646cffaa)}.logo.vanilla:hover{filter:drop-shadow(0 0 2em #3178c6aa)}.card{padding:2em}.read-the-docs{color:#888}button{border-radius:8px;border:1px solid transparent;padding:.6em 1.2em;font-size:1em;font-weight:500;font-family:inherit;background-color:#f9f9f9;cursor:pointer;transition:border-color .25s}button:hover{border-color:#646cff}button:focus,button:focus-visible{outline:4px auto -webkit-focus-ring-color}\n/*$vite$:1*/",document.head.appendChild(n);var o=function(){return n=function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),i(this,"routes",new Map),i(this,"popupHandlers",new Map),i(this,"popupStack",[]),i(this,"defaultRoute",null),i(this,"notFoundHandler",null),window.addEventListener("popstate",this.handlePopState.bind(this)),window.addEventListener("load",this.handleInitialRoute.bind(this)),t.defaultRoute&&(this.defaultRoute=t.defaultRoute),t.notFoundHandler&&(this.notFoundHandler=t.notFoundHandler),"complete"===document.readyState&&this.handleInitialRoute()},t=[{key:"route",value:function(n,t){return this.routes.set(n,t),this}},{key:"setDefaultRoute",value:function(n){return this.defaultRoute=n,this}},{key:"setNotFoundHandler",value:function(n){return this.notFoundHandler=n,this}},{key:"registerPopup",value:function(n,t){return this.popupHandlers.set(n,t),this}},{key:"navigate",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.closeAllPopups(!1),history.pushState({type:"page",path:n,data:t},"",n),this.renderCurrentPath()}},{key:"openPopup",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.popupHandlers.has(n)){var o=window.location.pathname,a=new URL(window.location.href),r={id:n,data:t,openedAt:(new Date).toISOString()};this.popupStack.push(r),a.searchParams.set("popup",n),Object.keys(t).length>0&&a.searchParams.set("data",btoa(JSON.stringify(t))),history.pushState({type:"popup",popup:r,stack:e(this.popupStack),path:o},"",a.toString()),this.renderPopup(r)}else console.error("Popup handler not found for: ".concat(n))}},{key:"closePopup",value:function(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(0!==this.popupStack.length){var t=this.popupStack.pop();if(n)history.back();else{this.updatePopupUI();var e=this.popupHandlers.get(t.id);e&&e.onClose&&e.onClose(t.data)}}}},{key:"closeAllPopups",value:function(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(0!==this.popupStack.length)if(n){var t=this.popupStack.length;history.go(-t)}else{for(;this.popupStack.length>0;){var e=this.popupStack.pop(),o=this.popupHandlers.get(e.id);o&&o.onClose&&o.onClose(e.data)}this.updatePopupUI()}}},{key:"refresh",value:function(){"popup"===(history.state||{}).type?this.updatePopupUI():this.renderCurrentPath()}},{key:"handlePopState",value:function(n){var t=n.state||{};t.stack?this.popupStack=t.stack:this.popupStack=[],"popup"===t.type?this.updatePopupUI():this.renderCurrentPath()}},{key:"handleInitialRoute",value:function(){var t=new URL(window.location.href),e=t.searchParams.get("popup");if(e&&this.popupHandlers.has(e)){var o={},a=t.searchParams.get("data");if(a)try{o=JSON.parse(atob(a))}catch(n){console.error("Failed to parse popup data",n)}var r={id:e,data:o,openedAt:(new Date).toISOString()};this.popupStack=[r],history.replaceState({type:"popup",popup:r,stack:this.popupStack,path:window.location.pathname},"",window.location.href),this.renderCurrentPath(),this.renderPopup(r)}else this.renderCurrentPath()}},{key:"renderCurrentPath",value:function(){var n,t=window.location.pathname,e=this.routes.get(t);document.querySelectorAll(".spa-popup").forEach((function(n){n.style.display="none"})),e?e(t,(null===(n=history.state)||void 0===n?void 0:n.data)||{}):this.notFoundHandler?this.notFoundHandler(t,{}):this.defaultRoute?this.defaultRoute(t,{}):console.error("No handler found for path: ".concat(t))}},{key:"renderPopup",value:function(n){var t=this.popupHandlers.get(n.id);t&&(t.onOpen&&t.onOpen(n.data),this.updatePopupUI())}},{key:"updatePopupUI",value:function(){var n=this;document.querySelectorAll(".spa-popup").forEach((function(n){n.style.display="none"})),this.popupStack.forEach((function(t,e){var o=n.popupHandlers.get(t.id);if(o&&o.element){var a=o.element;a.style.display="block",a.style.zIndex="".concat(1e3+e),o.onUpdate&&o.onUpdate(t.data)}}))}}],t&&r(n.prototype,t),o&&r(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,t,o}(),a="/resources/vite.svg",p=new o,u=new Map;u.set("Apple",1.99),u.set("Banana",.99),u.set("Orange",2.49),u.set("Mango",3.99);var s=new Map(Object.entries({Carrot:1.49,Broccoli:2.99,Spinach:3.49})),c=new Map([].concat(e(u),e(s)));document.body.innerHTML='\n  <div id="app-container">\n    <div id="page-container"></div>\n    \n    \x3c!-- Popups --\x3e\n    <div id="product-details-popup" class="spa-popup">\n      <div class="popup-content">\n        <div class="popup-header">\n          <h2 id="popup-product-name">Product Details</h2>\n          <button class="close-button">×</button>\n        </div>\n        <div class="popup-body">\n          <p id="popup-product-price"></p>\n          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla facilisi.</p>\n        </div>\n      </div>\n    </div>\n    \n    <div id="settings-popup" class="spa-popup">\n      <div class="popup-content">\n        <div class="popup-header">\n          <h2>Settings</h2>\n          <button class="close-button">×</button>\n        </div>\n        <div class="popup-body">\n          <h3>Theme</h3>\n          <select>\n            <option>Light</option>\n            <option>Dark</option>\n            <option>System</option>\n          </select>\n          <h3>Language</h3>\n          <select>\n            <option>English</option>\n            <option>Korean</option>\n            <option>Spanish</option>\n          </select>\n        </div>\n      </div>\n    </div>\n    \n    \x3c!-- Bottom Navigation --\x3e\n    <nav id="bottom-nav">\n      <button class="nav-btn" data-path="/">Home</button>\n      <button class="nav-btn" data-path="/products">Products</button>\n      <button class="nav-btn" data-path="/about">About</button>\n      <button id="settings-btn">Settings</button>\n    </nav>\n  </div>\n';var l=document.createElement("style");l.textContent="\n  body {\n    margin: 0;\n    padding: 0;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n  }\n  \n  #app-container {\n    display: flex;\n    flex-direction: column;\n    height: 100vh;\n    max-width: 100%;\n    overflow-x: hidden;\n  }\n  \n  #page-container {\n    flex: 1;\n    overflow-y: auto;\n    padding: 20px;\n    padding-bottom: 80px; /* Space for bottom nav */\n  }\n  \n  .page-header {\n    display: flex;\n    align-items: center;\n    margin-bottom: 20px;\n  }\n  \n  .page-header img {\n    height: 30px;\n    margin-right: 10px;\n  }\n  \n  .product-item {\n    padding: 15px;\n    margin-bottom: 10px;\n    border-radius: 8px;\n    background-color: #f8f9fa;\n    border-left: 4px solid #0095ff;\n    display: flex;\n    justify-content: space-between;\n  }\n  \n  /* Bottom navigation */\n  #bottom-nav {\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    display: flex;\n    background-color: #fff;\n    box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);\n    z-index: 100;\n  }\n  \n  .nav-btn {\n    flex: 1;\n    padding: 15px 5px;\n    border: none;\n    background: none;\n    font-size: 14px;\n    color: #666;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  }\n  \n  .nav-btn.active {\n    color: #0095ff;\n    font-weight: bold;\n  }\n  \n  /* Popup styles */\n  .spa-popup {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: rgba(0, 0, 0, 0.5);\n    display: none;\n    justify-content: center;\n    align-items: flex-end;\n    z-index: 1000;\n  }\n  \n  .popup-content {\n    background: white;\n    width: 100%;\n    max-height: 80%;\n    border-radius: 12px 12px 0 0;\n    overflow: hidden;\n    animation: slide-up 0.3s ease-out;\n  }\n  \n  .popup-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 16px;\n    border-bottom: 1px solid #eee;\n  }\n  \n  .popup-body {\n    padding: 20px;\n    overflow-y: auto;\n  }\n  \n  .close-button {\n    border: none;\n    background: none;\n    font-size: 24px;\n    cursor: pointer;\n  }\n  \n  @keyframes slide-up {\n    from { transform: translateY(100%); }\n    to { transform: translateY(0); }\n  }\n",document.head.appendChild(l),p.route("/",(function(n,t){var e;document.querySelector("#page-container").innerHTML='\n    <div class="page-header">\n      <img src="'.concat(a,'" alt="Vite logo" />\n      <h1>Home</h1>\n    </div>\n    <p>Welcome to our mobile app example using SpaNavigator!</p>\n    \n    <h2>Featured Products</h2>\n    <div class="product-item" data-product="Apple">\n      <span>Apple</span>\n      <span>$1.99</span>\n    </div>\n    <div class="product-item" data-product="Carrot">\n      <span>Carrot</span>\n      <span>$1.49</span>\n    </div>\n    \n    <h2>Today\'s Special</h2>\n    <div class="product-item special" data-product="Banana">\n      <span>Banana</span>\n      <span>$0.99 <small>20% OFF!</small></span>\n    </div>\n    \n    \x3c!-- New Button Added --\x3e\n    <div style="margin-top: 30px; text-align: center;">\n      <button id="show-random-product" style="background-color: #0095ff; color: white;">\n        Show Random Product Price\n      </button>\n    </div>\n  '),null===(e=document.querySelector("#show-random-product"))||void 0===e||e.addEventListener("click",(function(){var n,t=Array.from(c.keys()),e=t[Math.floor(Math.random()*t.length)],o=null!==(n=null==c?void 0:c.get(e))&&void 0!==n?n:"Price not available";alert("Random Product: ".concat(null!=e?e:"Unknown Product","\nPrice: $").concat(o))})),m("/"),v()})),p.route("/products",(function(n,e){var o=Array.from(c.entries()).map((function(n){var e=t(n,2),o=e[0],a=e[1];return'\n      <div class="product-item" data-product="'.concat(o,'">\n        <span>').concat(o,"</span>\n        <span>$").concat(a,"</span>\n      </div>\n    ")})).join("");document.querySelector("#page-container").innerHTML='\n    <div class="page-header">\n      <img src="'.concat("/resources/assets/typescript-EnIy2PE5.svg",'" alt="TypeScript logo" />\n      <h1>Products</h1>\n    </div>\n    <p>Browse our catalog of fresh products:</p>\n    \n    <div id="products-list">\n      ').concat(o,"\n    </div>\n  "),m("/products"),v()})),p.route("/about",(function(n,t){document.querySelector("#page-container").innerHTML='\n    <div class="page-header">\n      <img src="'.concat(a,'" alt="Vite logo" />\n      <h1>About</h1>\n    </div>\n    <p>This is a simple SPA example using custom router with history API integration.</p>\n    <p>Features demonstrated:</p>\n    <ul>\n      <li>Page navigation with history support</li>\n      <li>Mobile-friendly popup system</li>\n      <li>Map and Set usage for data management</li>\n    </ul>\n    <p>Built with Vite and TypeScript, optimized for iOS 12+</p>\n  '),m("/about")})),p.setNotFoundHandler((function(n,t){var e;document.querySelector("#page-container").innerHTML='\n    <h1>Page Not Found</h1>\n    <p>The path "'.concat(n,'" doesn\'t exist.</p>\n    <button id="back-home">Back to Home</button>\n  '),null===(e=document.querySelector("#back-home"))||void 0===e||e.addEventListener("click",(function(){p.navigate("/")}))}));var d,h={element:document.querySelector("#product-details-popup"),onOpen:function(n){document.querySelector("#popup-product-name").textContent=n.name,document.querySelector("#popup-product-price").textContent="Price: $".concat(n.price)},onClose:function(){console.log("Product details popup closed")}},f={element:document.querySelector("#settings-popup"),onOpen:function(n){console.log("Settings opened")}};function m(n){document.querySelectorAll(".nav-btn").forEach((function(t){t.dataset.path===n?t.classList.add("active"):t.classList.remove("active")}))}function v(){document.querySelectorAll(".product-item").forEach((function(n){n.addEventListener("click",(function(n){var t=n.currentTarget.dataset.product;if(t){var e=c.get(t)||0;p.openPopup("product-details",{name:t,price:e})}}))}))}p.registerPopup("product-details",h),p.registerPopup("settings",f),document.querySelectorAll(".nav-btn").forEach((function(n){n.addEventListener("click",(function(n){var t=n.currentTarget.dataset.path;t&&p.navigate(t)}))})),null===(d=document.querySelector("#settings-btn"))||void 0===d||d.addEventListener("click",(function(){p.openPopup("settings",{})})),document.querySelectorAll(".close-button").forEach((function(n){n.addEventListener("click",(function(){p.closePopup()}))})),p.navigate("/")}}}))}();
